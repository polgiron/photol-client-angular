<div class="image-thumb" [ngClass]="{'is-loaded': imageLoaded}">
  <div class="image-wrapper">
    <button class="button-lightbox" (click)="openPhotoModal()">
      <app-image [flickrLayout]="true" [src]="image.signedUrl" [width]="image.oriWidth" [height]="image.oriHeight"
        [id]="image._id" (onImageLoaded)="onImageLoaded()"></app-image>
    </button>
    <app-image-overlay *ngIf="imageLoaded" [image]="image" [tags]="tags" [stars]="stars" [isAlbumView]="isAlbumView"
      [editMode]="editMode" [@fadeInAnimation]>
    </app-image-overlay>
    <div class="edit-toolbar">
      <div class="group" *ngIf="isAlbumView && editMode" [@fadeAnimation]>
        <button class="button-overlay" (click)="updateCover()" [ngClass]="{'is-disabled': isCover}"
          [tooltip]="isCover ? null : 'Set as Cover'" container="body" preventDefaultClick>
          <i class="material-icons">photo</i>
          <i class="material-icons icon-check" *ngIf="isCover">check</i>
        </button>
      </div>
      <div class="group" *ngIf="editMode" [@fadeAnimation]>
        <button class="button-overlay" (click)="delete()" preventDefaultClick><i
            class="material-icons">delete</i></button>
      </div>
    </div>
    <!-- <button class="to-print-button button-overlay" [ngClass]="{'add-to-print': !image.toPrint}"
      (click)="toggleToPrint()" container="body" preventDefaultClick>
      <i class="material-icons" *ngIf="!image.toPrint">add</i>
      <i class="material-icons" *ngIf="image.toPrint">check</i>
    </button> -->
    <button class="add-button button-overlay" [popover]="popContent" containerClass="popover--add-menu"
      outsideClick="true" preventDefaultClick>
      <i class="material-icons">add</i>
    </button>
  </div>
</div>

<ng-template #popContent>
  <app-add-menu [image]="image"></app-add-menu>
</ng-template>

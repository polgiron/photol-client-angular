<div class="image-thumb" [ngClass]="{ 'is-loaded': imageLoaded }">
  <div class="image-wrapper">
    <button class="button-lightbox" (click)="openPhotoModal()">
      <app-image
        [flickrLayout]="true"
        [src]="image.signedUrl"
        [width]="image.oriWidth"
        [height]="image.oriHeight"
        [id]="image._id"
        (onImageLoaded)="onImageLoaded()"
      ></app-image>
    </button>
    <app-image-overlay
      *ngIf="imageLoaded && isLoggedIn"
      [image]="image"
      [tags]="tags"
      [stars]="stars"
      [isAlbumView]="isAlbumView"
      [editMode]="editMode"
      [@fadeInAnimation]
    >
    </app-image-overlay>
    <div class="edit-toolbar" *ngIf="isLoggedIn">
      <div class="group" *ngIf="isAlbumView && editMode" [@fadeAnimation]>
        <button
          class="button-overlay"
          (click)="updateCover()"
          [tooltip]="isCover ? null : 'Set as Cover'"
          container="body"
          preventDefaultClick
        >
          <i class="bi bi-image"></i>
          <i class="bi bi-check" *ngIf="isCover"></i>
        </button>
      </div>
      <div class="group" *ngIf="editMode" [@fadeAnimation]>
        <button class="button-overlay" (click)="delete()" preventDefaultClick>
          <i class="bi bi-trash"></i>
        </button>
      </div>
    </div>
    <app-button-add-menu
      *ngIf="isLoggedIn"
      [image]="image"
    ></app-button-add-menu>
  </div>
</div>
